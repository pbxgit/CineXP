/* --- 1. GLOBAL SETUP & THEMING --- */
:root {
    --background-color: #030408;
    --text-color: #f0f0f0;
    --font-family-heading: 'Poppins', sans-serif;
    --font-family-body: 'Roboto', sans-serif;
    --header-height: 90px;
    --hero-slide-duration: 10s;
}
* { box-sizing: border-box; margin: 0; padding: 0; }

html, body { width: 100%; overflow-x: hidden; }
body {
    background-color: var(--background-color);
    color: var(--text-color);
    font-family: var(--font-family-body);
    position: relative;
}
body.modal-open, body.search-open { overflow: hidden; }

/* Immersive background effect */
main, header {
    transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1), filter 0.5s cubic-bezier(0.16, 1, 0.3, 1);
}
body.search-open main, body.search-open header {
    transform: scale(0.95);
    filter: blur(10px);
    user-select: none;
    pointer-events: none;
}


/* --- 2. HEADER & NAVIGATION --- */
.main-header {
    position: fixed; top: 0; left: 0; width: 100%; height: var(--header-height);
    display: flex; justify-content: space-between; align-items: center;
    padding: 0 5vw; z-index: 100;
}
.main-header.scrolled {
    background-color: rgba(3, 4, 8, 0.7);
    backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
}
.logo {
    font-family: var(--font-family-heading);
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--text-color);
    text-decoration: none;
}
.main-nav a { color: var(--text-color); text-decoration: none; font-weight: 500; margin-left: 25px; }

/* --- 3. HERO SECTION --- */
#hero-section{position:relative;height:100vh;display:flex;align-items:flex-end;justify-content:flex-start;padding:0 5vw;overflow:hidden;-webkit-user-select:none;user-select:none}@keyframes ken-burns{0%{transform:scale(1) rotate(.001deg)}100%{transform:scale(1.1) rotate(.001deg)}}.hero-background,.hero-background-next{position:absolute;top:0;left:0;width:100%;height:100%;background-size:cover;background-position:center;transition:opacity 2s cubic-bezier(.4,0,.2,1);animation:ken-burns calc(var(--hero-slide-duration) * 1.5) infinite alternate ease-in-out}.hero-background{z-index:1;opacity:1}.hero-background-next{z-index:0;opacity:0}.hero-background::after,.hero-background-next::after{content:'';position:absolute;inset:0;background:linear-gradient(to top,rgba(3,4,8,1) 5%,transparent 40%),radial-gradient(ellipse at center,transparent 40%,var(--background-color) 95%)}.hero-content{position:relative;z-index:2;width:100%;max-width:500px;display:flex;flex-direction:column;align-items:flex-start;margin-bottom:15vh}.hero-title-container,.hero-tagline,.cta-button,.hero-indicators{opacity:0;transform:translateY(20px);transition:opacity .8s ease-out,transform .8s ease-out}#hero-section.active .hero-title-container{opacity:1;transform:translateY(0);transition-delay:.3s}#hero-section.active .hero-tagline{opacity:1;transform:translateY(0);transition-delay:.4s}#hero-section.active .hero-indicators{opacity:1;transform:translateY(0);transition-delay:.5s}#hero-section.active .cta-button{opacity:1;transform:translateY(0);transition-delay:.6s}.hero-title-container{min-height:60px;margin-bottom:1.25rem}.hero-logo-container{display:none}.hero-logo{width:100%;max-width:400px;height:auto;object-fit:contain;filter:drop-shadow(0 0 20px rgba(0,0,0,.8))}
.hero-title {
    display: none;
    font-family: var(--font-family-heading);
    font-size: clamp(2.2rem, 6vw, 3.5rem);
    font-weight: 900;
    line-height: 1.1;
    text-shadow: 0 4px 15px rgba(0,0,0,.7);
}
.hero-tagline{font-size:clamp(1.1rem,2.5vw,1.3rem);font-weight:400;margin-bottom:2.5rem;line-height:1.5;max-width:90%}.hero-indicators{display:flex;gap:6px;margin-bottom:2.5rem;width:100%;max-width:250px;height:4px}.indicator-bar{flex-grow:1;background-color:rgba(255,255,255,.2);border-radius:2px;position:relative;overflow:hidden;cursor:pointer;transition:background-color .3s ease}.indicator-bar:hover{background-color:rgba(255,255,255,.4)}.indicator-bar .progress{position:absolute;top:0;left:0;width:0%;height:100%;background-color:var(--text-color);border-radius:2px}.indicator-bar.active .progress{width:100%}.cta-button{color:var(--text-color);text-decoration:none;font-weight:700;padding:14px 28px;font-size:1rem;border-radius:8px;background-color:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.15);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);transition:background-color .3s ease,transform .3s ease}.cta-button:hover{background-color:rgba(255,255,255,.2);transform:scale(1.05)}

/* --- 4. PAGE CONTENT & CAROUSELS --- */
#page-content{position:relative;z-index:5;background-color:var(--background-color);padding:4rem 5vw}
.carousel-section h2 {
    font-family: var(--font-family-heading);
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
}
.carousel-section{margin-bottom:4rem;opacity:0;transform:translateY(30px);transition:opacity .8s ease,transform .8s ease}.carousel-section.is-visible{opacity:1;transform:translateY(0)}.movie-carousel{display:flex;overflow-x:auto;gap:15px;padding-bottom:20px;scrollbar-width:none}.movie-carousel::-webkit-scrollbar{display:none}

.movie-poster {
    flex-shrink: 0;
    width: 200px;
    border-radius: 10px;
    overflow: hidden;
    transition: transform 0.4s ease, box-shadow 0.4s ease, border-color 0.4s ease;
    cursor: pointer;
    position: relative;
    background-color: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
}
.movie-poster img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}
.movie-poster:hover {
    transform: scale(1.08) translateY(-10px);
    box-shadow: 0 20px 40px rgba(0,0,0,.6);
    border-color: rgba(255, 255, 255, 0.2);
}

/* --- 5. DETAILS MODAL --- */
#details-modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.7);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);z-index:1000;opacity:0;transition:opacity .4s ease;pointer-events:none}#details-modal-overlay.active{opacity:1;pointer-events:auto}#details-modal{position:fixed;top:50%;left:50%;width:90%;max-width:800px;max-height:80vh;overflow-y:auto;background-color:rgba(10,12,18,.8);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);border-radius:12px;z-index:1001;transform:translate(-50%,-50%) scale(.95);opacity:0;transition:opacity .4s ease,transform .4s ease;pointer-events:none}#details-modal.active{transform:translate(-50%,-50%) scale(1);opacity:1;pointer-events:auto}#modal-close-btn{position:absolute;top:15px;right:15px;background:rgba(0,0,0,.5);color:#fff;border:none;border-radius:50%;width:30px;height:30px;font-size:1.5rem;line-height:30px;text-align:center;cursor:pointer;z-index:2}.modal-content{padding:2rem}

/* --- AWWWARDS-LEVEL SEARCH UI --- */
#search-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(3, 4, 8, 0.7);
    backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    z-index: 1100;
    display: flex; flex-direction: column; align-items: center;
    padding: 8vh 5vw 5vh;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1), visibility 0.5s;
}
#search-overlay.active { opacity: 1; visibility: visible; }
#search-close-btn {
    position: absolute; top: 30px; right: 5vw;
    background: transparent; border: none;
    color: var(--text-color); font-size: 2.5rem;
    cursor: pointer; opacity: 0.7;
    transition: opacity 0.3s ease, transform 0.3s ease;
}
#search-close-btn:hover { opacity: 1; transform: rotate(90deg); }
.search-input-container {
    width: 100%; max-width: 700px; margin-bottom: 3rem;
    transform: translateY(20px); opacity: 0;
    transition: opacity 0.6s ease 0.2s, transform 0.6s ease 0.2s;
}
#search-overlay.active .search-input-container { transform: translateY(0); opacity: 1; }
#search-input {
    width: 100%; background: transparent; border: none;
    border-bottom: 2px solid rgba(255, 255, 255, 0.3);
    color: var(--text-color);
    font-family: var(--font-family-heading);
    font-size: clamp(1.5rem, 5vw, 3rem);
    font-weight: 500;
    padding: 1rem 0;
    text-align: center; outline: none; position: relative;
    transition: border-color 0.3s ease;
}
#search-input::placeholder { color: rgba(255, 255, 255, 0.4); font-weight: 500; }
#search-input:focus { border-color: var(--text-color); }
#search-results-container {
    width: 100%; flex-grow: 1; overflow-y: auto;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 25px;
    padding: 0 10px 20px;
}
/* --- CORE FIX FOR CROPPING & OVERLAP --- */
#search-results-container .movie-poster {
    /* Override carousel styles */
    width: 100%;
    flex-shrink: 1;

    /* Enforce a 2:3 aspect ratio to prevent cropping */
    aspect-ratio: 2 / 3;

    /* Animation styles */
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.5s ease, transform 0.5s ease, box-shadow 0.3s ease, border-color 0.3s ease;
}
#search-results-container .movie-poster.is-visible { opacity: 1; transform: translateY(0); }
#search-results-container .movie-poster:hover {
    transform: scale(1.05);
    box-shadow: 0 10px 20px rgba(0,0,0,0.4);
    border-color: rgba(255, 255, 255, 0.25);
}
.no-results {
    color: rgba(255, 255, 255, 0.6);
    grid-column: 1 / -1;
    text-align: center; font-size: 1.2rem;
    margin-top: 2rem; opacity: 0;
    transition: opacity 0.5s ease;
}
.no-results.is-visible { opacity: 1; }
#search-results-container::-webkit-scrollbar { width: 8px; }
#search-results-container::-webkit-scrollbar-track { background: transparent; }
#search-results-container::-webkit-scrollbar-thumb { background-color: rgba(255, 255, 255, 0.2); border-radius: 4px; }

/* --- 7. RESPONSIVENESS --- */
@media (max-width: 768px) {
    .main-header,#hero-section,#page-content{padding-left:5vw;padding-right:5vw}.main-nav{display:none}.hero-content{align-items:center;text-align:center}.hero-title-container,.hero-tagline{align-self:stretch}.carousel-section h2{font-size:1.5rem}.movie-poster{width:150px}
    #search-results-container {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 15px;
    }
}
